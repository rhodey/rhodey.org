!!!
uuid-use-with-caution
September 12, 2016
UUID, Use With Caution
I began toying with High-Frequency Trading (HFT) on the Coinbase Exchange in May of 2016. While reading through the API documentation for placing a new order I was excited to read the following: "The optional `client_oid` field must be a UUID generated by your trading application. This field value will be broadcast in the public feed for received messages."
<!--no banner-->
!!!


I began toying with High-Frequency Trading (HFT) on the [Coinbase Exchange](https://pro.coinbase.com) in May of 2016. While reading through the GDAX API documentation for placing a new order I was excited to read the following:

> The optional `client_oid` field must be a UUID generated by your trading application. This field value will be broadcast in the public feed for received messages. You can use this field to identify your orders in the public feed.

This detail is exciting because it is a classic example of *UUIDs* showing up where they're not well suited. Now, this isn't a huge vulnerability, but it is a great chance for me to share a favorite fun fact: **most UUIDs contain the client MAC Address!!1!**

## UUID Introduction
[UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier) stands for *Universally Unique Identifier*; basically it is a set of standards for generating `128 bit` unique values. Currently there are five distinct versions of the UUID standard each specifying a different way to construct the `128 bit` value. The most popular version in use today is [Version 1](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_.28date-time_and_MAC_address.29) and it is in v1 where the last `48 bits` contain the client [MAC Address](https://en.wikipedia.org/wiki/MAC_address). The exact structure of a v1 UUID is as follows:

```
bits 0->64:
  0xFFFFFFFF00000000 time_low
  0x00000000FFFF0000 time_mid
  0x000000000000F000 version
  0x0000000000000FFF time_hi

bits 64->128:
  0xC000000000000000 variant
  0x3FFF000000000000 clock_seq
  0x0000FFFFFFFFFFFF node (MAC)
```

## Vulnerability Explained
HFT really boils down to two things:

1. Speed
2. Strategy

Because of this HFT firms go to extreme measures to protect the secrecy of both their technology stack and strategy book. When an HFT bot submits an order to the Coinbase GDAX Exchange using UUIDv1 to generate the `client_oid` request parameter the bot is **tagging each order with its MAC Address and essentially opening its strategy book for inspection**.

## Vulnerability Reporting
For awhile I just sat on this vulnerability and had fun trying to pick apart the strategies of various bots trading on GDAX, then I came across this job description for [Software Engineer - Exchange](https://www.coinbase.com/careers/262509) posted by Coinbase themselves! I expected that working on the GDAX trading platform would be really interesting and that pointing out this UUID problem would help my application so I sent in my resume and followed up with a report to their [Bug Bountry](https://www.coinbase.com/whitehat):

![](/assets/img/gdax/gdax-report.png)

## Bug Bounty Response
The report was quickly closed with status `Not Applicable` and the following response:

![](/assets/img/gdax/gdax-response.png)

OK, sure, it's not *[RCE](https://en.wikipedia.org/wiki/Arbitrary_code_execution)* or *[SQLi](https://en.wikipedia.org/wiki/SQL_injection)* but GDAX should be concerned about protecting the anonymity of its traders and a simple note in the API doc could do a lot to help this. I definitely had no expectation for large reward in this case but to not even say "thanks", especially when someone explains they are hoping to work with you is unprofessional.

![](/assets/img/gdax/gdax-lol.png)
